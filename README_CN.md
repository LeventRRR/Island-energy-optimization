# 岛屿能源系统优化模型

基于混合整数线性规划(MILP)和Gurobi求解器的岛屿能源基础设施优化设计模型。该系统整合多种能源载体，结合先进的可靠性建模和气候情景分析。

## 🌊 项目概述

该项目实现了岛屿能源系统的优化方法，具有以下特点：
- 在确保可靠能源供应的同时最小化系统总成本
- 建模多种能源技术，包括可再生能源、储能和转换系统
- 采用蒙特卡洛仿真进行综合可靠性分析
- 支持通过未来情景建模评估气候变化影响

### 核心功能
- **多能源系统**: 集成电热冷网络，涵盖风能、太阳能、波浪能、LNG和氢气等多种能源
- **高级可靠性建模**: 采用蒙特卡洛仿真和K-means聚类处理设备故障
- **气候情景分析**: 2020年基线与2050年灾害情景的对比，以及2030-2050年未来技术进步情景的对比
- **优化引擎**: 使用Gurobi MILP求解器
- **批处理功能**: 自动化脚本处理多个岛屿位置

## 🏗️ 系统架构

### 建模的能源技术

**可再生能源:**
- 风力发电机 (WT)
- 太阳能光伏 (PV) 
- 波浪能转换器 (WEC)

**传统能源系统:**
- LNG储存和消费
- 热电联产 (CHP)

**储能系统:**
- 电储能系统 (ESS)
- 热储能 (TES)
- 冷储能 (CES)
- 氢储能 (H2S)

**能源转换:**
- 电锅炉 (EB)
- 空调系统 (AC)
- 质子交换膜电解槽 (PEM)
- 燃料电池 (FC)
- LNG气化器 (LNGV)

## 📊 情景分析

模型支持多个时间情景，采用不同的气候预测和技术成本：

| 脚本文件 | 供需基准年 | 气候灾害数据 | 技术成本年份 | 用途说明 |
|----------|------------|--------------|--------------|----------|
| `disaster_2020.py` | 2020年供需 | 2020年气候 | 2020年成本 | 2020年基线情景优化 |
| `disaster_2050.py` | 2020年供需 | 2050年气候 | 2020年成本 | 2050年气候下的系统优化 |
| `disaster_future_2030.py` | 2020年供需 | 2050年气候 | 2030年成本 | 2030年技术成本预测 |
| `disaster_future_2040.py` | 2020年供需 | 2050年气候 | 2040年成本 | 2040年技术成本预测 |
| `disaster_future_2050.py` | 2020年供需 | 2050年气候 | 2050年成本 | 2050年技术成本预测 |

所有情景均采用**3小时时间分辨率**以提高计算效率。

## 🚀 快速开始

### 环境要求

**必需的Python包:**
```bash
pip install pandas numpy xarray gurobipy scipy geopy pvlib timezonefinder scikit-learn matplotlib
```

**系统要求:**
- Gurobi优化器(需要许可证)
- 推荐在计算集群上进行大规模计算 如果只算单个岛屿的case建议16GB+的内存容量

### 基本使用
**批处理:**
```bash
- 在计算集群linux终端中：
# 处理chosen_island.csv中所有岛屿的2020/2050情景
nohup ./run_jobs.sh > run_tasks.log 2>&1 &
# 处理chosen_island.csv中所有岛屿的技术进步情景
nohup ./run_jobs_future.sh > run_tasks.log 2>&1 &
```

### 输入数据结构

模型需要以下数据目录：

```
project_root/
├── demand/                    # 能源需求数据
│   ├── demand_{lat}_{lon}.csv # 能源需求profiles
│   ├── pv_{lat}_{lon}.csv     # 太阳能发电profiles
│   └── wt_{lat}_{lon}.csv     # 风能发电profiles
├── CMIP6/                     # 气候模型数据
│   ├── MRI_2020_uas/         # 2020年风速数据(u分量)
│   ├── MRI_2020_vas/         # 2020年风速数据(v分量)
│   ├── MRI_2050_uas/         # 2050年风速预测
│   └── MRI_2050_vas/         # 2050年风速预测
├── wave/                      # 波浪能数据
│   ├── wave_2020.nc          # 2020年波浪能
│   ├── waveheight_2020.nc    # 2020年波高
│   ├── wave_2050.nc          # 2050年波浪能预测
│   └── waveheight_2050.nc    # 2050年波高预测
└── LNG/                       # LNG终端位置数据
    └── LNG_Terminals.xlsx
```

## 📈 模型建模

### 优化目标
最小化系统总成本，包括：
- 所有设备的资本支出 (CAPEX)
- 运营支出 (OPEX) 
- 基于到最近终端距离的LNG运输成本
- 弃能成本
- 削减负荷成本
  
### 关键约束
- **能源平衡**: 所有能源载体的供需平衡
- **可靠性要求**: 99.9%可用性 (0.1% EENS限制)
- **设备容量**: 所有技术的功率和能量约束
- **储能运行**: 连续充放电，考虑效率损失
- **LNG采购**: 14天周期性采购循环

### 可靠性建模
1. **蒙特卡洛仿真**: 生成1000个故障情景
2. **设备故障率**: 基于风速和波高阈值
3. **K-means聚类**: 使用轮廓系数自动选择聚类数
4. **修复时间**: 特定技术的停机时间

## 📋 输出文件

结果按情景组织在专用输出目录中：

### 每个岛屿的结果
- `{lat}_{lon}_best_cost.csv` - 详细成本分解
- `{lat}_{lon}_capacity.csv` - 最优设备容量
- `{lat}_{lon}_results.csv` - 完整时间范围的逐小时运行结果


### 批处理日志
- `logs/main_log.log` - 2020/2050气候情景的主执行日志
- `logs/main_future_log.log` - 未来情景的主执行日志
- `logs/gap_failure_islands.csv` - 未达到1% MIP gap目标的岛屿

## 🔬 研究应用

该模型支持以下研究：
- **气候变化影响评估**: 比较不同气候情景下能源系统韧性
- **能源安全分析**: 量化不同技术的可靠性改进
- **经济优化**: 可再生能源vs传统系统的成本效益分析
- **政策规划**: 偏远社区的基础设施投资策略
